<view class="container">
  <view class="header" wx:if="{{userInfo}}">
    <text class="welcome">Hi, {{userInfo.username}} ğŸ’•</text>
    <view class="notification-btn" bindtap="openRequestsModal" wx:if="{{pendingRequestsCount > 0}}">
      <text class="notification-icon">ğŸ””</text>
      <view class="notification-badge">{{pendingRequestsCount}}</view>
    </view>
  </view>

  <!-- æ‹çˆ±çŠ¶æ€ -->
  <view class="love-card" wx:if="{{partnerInfo}}">
    <view class="love-icon">â¤ï¸</view>
    <view class="love-days">
      <text class="days-number">{{loveDays}}</text>
      <text class="days-text">å¤©</text>
    </view>
    <view class="love-date">
      <text>ä¸ {{partnerInfo.username || partnerInfo.phone}} è‡ª {{loveStartDate}} èµ·</text>
    </view>
  </view>

  <view class="love-card empty" wx:else>
    <view class="love-icon">ğŸ’Œ</view>
    <text class="empty-text">è¿˜æ²¡æœ‰ç»‘å®šä¼´ä¾£ï¼Œå¿«å»é‚€è¯· TA å§</text>
    <button class="bind-btn" bindtap="openBindModal">é‚€è¯·ä¼´ä¾£</button>
  </view>

  <!-- åŠŸèƒ½æŒ‰é’® -->
  <view class="feature-grid">
    <view class="feature-item" bindtap="openBindModal">
      <view class="feature-icon">ğŸ‘«</view>
      <text class="feature-text">{{partnerInfo ? 'é‡æ–°é‚€è¯·' : 'é‚€è¯·ä¼´ä¾£'}}</text>
    </view>
    <view class="feature-item" bindtap="openRequestsModal">
      <view class="feature-icon">ğŸ“¨</view>
      <text class="feature-text">é‚€è¯·è®°å½•</text>
      <view class="badge" wx:if="{{pendingRequestsCount > 0}}">{{pendingRequestsCount}}</view>
    </view>
    <view class="feature-item">
      <view class="feature-icon">ğŸ“…</view>
      <text class="feature-text">çºªå¿µæ—¥</text>
    </view>
    <view class="feature-item">
      <view class="feature-icon">ğŸ“·</view>
      <text class="feature-text">ç›¸å†Œ</text>
    </view>
  </view>
</view>

<!-- ä½¿ç”¨ç»‘å®šä¼´ä¾£ç»„ä»¶ -->
<bind-partner 
  show="{{showBindModal}}" 
  userInfo="{{userInfo}}"
  bind:close="closeBindModal"
  bind:success="onBindSuccess"
/>

<!-- ä½¿ç”¨ä¼´ä¾£è¯·æ±‚åˆ—è¡¨ç»„ä»¶ -->
<partner-requests 
  show="{{showRequestsModal}}" 
  userInfo="{{userInfo}}"
  bind:close="closeRequestsModal"
  bind:success="onRequestSuccess"
/>